<?xml version="1.0" encoding="UTF-8"?>
<launch>

    <arg name="robot_namespace" />
    <arg name="robot_tf_prefix" default=""/>
    <arg name="x" default="0.0"/>
    <arg name="y" default="0.0"/>
    <arg name="z" default="0.3"/>
    <arg name="yaw" default="0.0"/>


    <!-- Load controller config  -->
    <rosparam file="$(find arena-simulation-setup)/robot/$(arg model)/robot_control.yaml" command="load"/>
    <param name="diff_drive_controller/base_frame_id" value="$(arg robot_tf_prefix)/base_link" />
    <param name="diff_drive_controller/odom_frame_id" value="$(arg robot_tf_prefix)/odom" />


    <!-- Note there is a intentional / for the robot description -->

    <!-- load the controllers -->
    <node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false"
    output="screen" args="joint_state_controller diff_drive_controller" >
         <remap from="/base_link" to="base_link"/>
     <remap from="/odom" to="/odom"/>
     </node>

  <node 
   name="odom_pub" 
   pkg="gazebo_utils" 
   type="odom.py" 
   args="$(arg robot_namespace)" 
    />
</launch>   